{% if image %}

    {% set transform = transform ??? 'fullscreen' %}
    {% set responsiveTransforms = responsiveTransforms ?? [] %}

    {% if responsiveTransforms | length %}
        <picture>

        {% for size, transform in responsiveTransforms %}
            {% set responsiveTransformedImage = craft.imager.transformImage(image, transform) %}
            <source
                data-srcset="{{ responsiveTransformedImage | srcset }}"
                media="(min-width: {{ size }}px)"
            />
        {% endfor %}

    {% endif %}

    {% set transformedImage = craft.imager.transformImage(image, transform) %}
    {% set fallbackImage = transformedImage | last %}
    {% set placeholder = craft.imager.placeholder({
        color: '#DFDFDF',
        width: fallbackImage.width,
        height: fallbackImage.height,
    }) %}

    {% set imgStyles = '' %}
    {% if image.hasFocalPoint %}
        {% set x = image.focalPoint | first * 100 ~ '%' %}
        {% set y = image.focalPoint | last * 100 ~ '%' %}
        {% set imgStyles = 'object-position: ' ~ [x, y]|join(' ') %}
    {% endif %}

    {{ tag('img', {
        src: fallbackImage,
        srcset: placeholder,
        style: imgStyles,
        'data-sizes': 'auto',
        'data-srcset': transformedImage | srcset,
        alt: image.alt ??? image.title ??? '',
        class: 'lazyload blur-up ' ~ classes ?? '',
    }) }}

    {% if responsiveTransforms | length %}
        </picture>
    {% endif %}

{% endif %}
